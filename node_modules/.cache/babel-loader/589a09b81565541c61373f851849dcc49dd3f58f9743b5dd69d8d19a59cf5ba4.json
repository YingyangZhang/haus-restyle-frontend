{"ast":null,"code":"import _defineProperty from\"/Users/yingyangzhang/Desktop/Porjects/Haus-Restyle/haus-restyle-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/yingyangzhang/Desktop/Porjects/Haus-Restyle/haus-restyle-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/yingyangzhang/Desktop/Porjects/Haus-Restyle/haus-restyle-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState}from\"react\";import LoadingScreen from\"../loading/LoadingScreen\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignIn(_ref){var setIsForm=_ref.setIsForm,setIsSignUpForm=_ref.setIsSignUpForm,setUser=_ref.setUser,setCart=_ref.setCart;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState({username:'',password:''}),_useState4=_slicedToArray(_useState3,2),signInInput=_useState4[0],setSignInInput=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];function handleInput(e){var name=e.target.name;var value=e.target.value;setSignInInput(_objectSpread(_objectSpread({},signInInput),{},_defineProperty({},name,value)));}function handleLogIn(e){e.preventDefault();setIsLoading(true);fetch('https://haus-db.onrender.com/login',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:signInInput})}).then(function(r){if(r.ok){r.json().then(function(data){setIsLoading(false);localStorage.setItem(\"jwt\",data.jwt);setUser(data.user);setCart(data.user.cart_items);setIsForm(false);});}else{r.json().then(function(error){setIsLoading(false);setError(error.message);});}});}return/*#__PURE__*/_jsxs(\"form\",{className:\"form-container grey-background\",onSubmit:handleLogIn,children:[isLoading&&/*#__PURE__*/_jsx(LoadingScreen,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-header-container flex-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-x\",onClick:function onClick(){return setIsForm(false);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",name:\"username\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter password\",name:\"password\",onChange:handleInput})]}),/*#__PURE__*/_jsx(\"div\",{className:\"errors-container\",children:error?/*#__PURE__*/_jsxs(\"p\",{children:[\"* \",error]}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons-container flex-box\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button\",type:\"submit\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Sign in\"}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-arrow-back\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"form-toggle-button\",onClick:function onClick(){return setIsSignUpForm(true);},children:\"Sign Up\"})]})]});}","map":{"version":3,"names":["React","useState","LoadingScreen","jsx","_jsx","jsxs","_jsxs","SignIn","_ref","setIsForm","setIsSignUpForm","setUser","setCart","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","username","password","_useState4","signInInput","setSignInInput","_useState5","_useState6","error","setError","handleInput","e","name","target","value","_objectSpread","_defineProperty","handleLogIn","preventDefault","fetch","method","headers","body","JSON","stringify","user","then","r","ok","json","data","localStorage","setItem","jwt","cart_items","message","className","onSubmit","children","onClick","type","placeholder","onChange"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Haus-Restyle/haus-restyle-frontend/src/components/users/SignIn.js"],"sourcesContent":["import { React, useState } from \"react\";\nimport LoadingScreen from \"../loading/LoadingScreen\";\n\nexport default function SignIn({setIsForm, setIsSignUpForm, setUser, setCart}) {\n    const [isLoading, setIsLoading] = useState(false);\n    const [signInInput, setSignInInput] = useState({\n        username: '',\n        password: '',\n    });\n    const [error, setError] = useState(null);\n\n    function handleInput(e) {\n        const name = e.target.name;\n        let value = e.target.value;\n\n        setSignInInput({\n            ...signInInput,\n            [name]: value,\n        })\n    }\n\n    function handleLogIn(e) {\n        e.preventDefault();\n\n        setIsLoading(true);\n\n        fetch('https://haus-db.onrender.com/login', {\n            method: 'POST',\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                user: signInInput,\n            })\n        })\n        .then(r => {\n            if (r.ok) {\n                r.json().then(data => {\n                    setIsLoading(false);\n                    localStorage.setItem(\"jwt\", data.jwt);\n                    setUser(data.user);\n                    setCart(data.user.cart_items);\n                    setIsForm(false);\n                })\n            } else {\n                r.json().then((error) => {\n                    setIsLoading(false);\n                    setError(error.message);\n                })\n            }\n        })\n    }\n\n    return (\n        <form className='form-container grey-background' onSubmit={handleLogIn}>\n            {isLoading && <LoadingScreen />}\n\n            <div className='form-header-container flex-box'>\n                <h1>Login</h1>\n\n                <i className='bx bx-x' onClick={() => setIsForm(false)}></i>\n            </div>\n\n            <div className='form-item-container'>\n                <p>Username</p>\n\n                <input type='text' placeholder='Enter username' name='username' onChange={handleInput} />\n            </div>\n\n            <div className='form-item-container'>\n                <p>Password</p>\n                \n                <input type='password' placeholder='Enter password' name='password' onChange={handleInput} />\n            </div>\n            \n            <div className='errors-container'>\n                {error ? <p>* {error}</p> : null}\n            </div>\n\n            <div className='form-buttons-container flex-box'>\n                <button className='button' type='submit' > \n                    <p>Sign in</p>\n                    <i className='bx bx-arrow-back' ></i>\n                </button>\n                \n                <p className=\"form-toggle-button\" onClick={() => setIsSignUpForm(true)}>Sign Up</p>\n            </div>\n        </form>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}