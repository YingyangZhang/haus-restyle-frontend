{"ast":null,"code":"import _toConsumableArray from\"/Users/yingyangzhang/Desktop/Porjects/Haus-Restyle/haus-restyle-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React from\"react\";import{useNavigate}from\"react-router-dom\";import Footer from\"../footer/Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(_ref){var cart=_ref.cart,setCart=_ref.setCart,isScrolled=_ref.isScrolled;var navigate=useNavigate();var token=localStorage.getItem(\"jwt\");var total=cart.reduce(function(a,c){return a+c.furniture.price*c.quantities;},0);function handleAdd(id,quantities){if(quantities<=9){fetch(\"https://haus-db.onrender.com/cart_items/\".concat(id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({'quantities':quantities+1})}).then(function(r){return r.json();}).then(function(data){var updatedCart=_toConsumableArray(cart);var index=updatedCart.findIndex(function(item){return item.id===id;});updatedCart[index]=data.user.cart_items.find(function(item){return item.id===id;});setCart(updatedCart);});}}function handleMinus(id,quantities){if(quantities>1){fetch(\"https://haus-db.onrender.com/cart_items/\".concat(id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({'quantities':quantities-1})}).then(function(r){return r.json();}).then(function(data){var updatedCart=_toConsumableArray(cart);var index=updatedCart.findIndex(function(item){return item.id===id;});updatedCart[index]=data.user.cart_items.find(function(item){return item.id===id;});setCart(updatedCart);});}}function handleRemove(id){fetch(\"https://haus-db.onrender.com/cart_items/\".concat(id),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}}).then(function(r){return r.json();}).then(function(data){setCart(data.user.cart_items);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container flex-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-background grey-background \".concat(isScrolled?'add-dropshadow':'')}),cart.length!==0?/*#__PURE__*/_jsxs(\"div\",{className:\"cart flex-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-cards-container flex-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Order Summary\"}),cart.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-card flex-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-img-container\",onClick:function onClick(){return navigate(\"/furnitures/\".concat(item.furniture.id));},children:/*#__PURE__*/_jsx(\"img\",{src:item.furniture.image.thumbnail,alt:\"image\",className:\"fixed-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-card-info flex-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-card-info-container\",children:[/*#__PURE__*/_jsx(\"h1\",{onClick:function onClick(){return navigate(\"/furnitures/\".concat(item.furniture.id));},children:item.furniture.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"USD \",item.furniture.price.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-card-operations-container flex-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-operation flex-box\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Quantity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-buttons flex-box\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-plus\",onClick:function onClick(){return handleAdd(item.id,item.quantities);}}),/*#__PURE__*/_jsx(\"p\",{children:item.quantities}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-minus\",onClick:function onClick(){return handleMinus(item.id,item.quantities);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"remove-button\",onClick:function onClick(){return handleRemove(item.id);},children:/*#__PURE__*/_jsx(\"p\",{children:\"Remove Furniture\"})})]})]})]},item.id);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total-container for-small-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-box\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Delivery\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Excluding delivery\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-box\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Total(Excel. tax)\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"USD \",total.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:function onClick(){return navigate('/checkout');},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Continue to checkout\"}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-arrow-back\"})]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"empty-cart-message\",children:\"Your cart is empty.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"subpages-footer-container\",children:/*#__PURE__*/_jsx(Footer,{})})]});}","map":{"version":3,"names":["React","useNavigate","Footer","jsx","_jsx","jsxs","_jsxs","Cart","_ref","cart","setCart","isScrolled","navigate","token","localStorage","getItem","total","reduce","a","c","furniture","price","quantities","handleAdd","id","fetch","concat","method","headers","Authorization","body","JSON","stringify","then","r","json","data","updatedCart","_toConsumableArray","index","findIndex","item","user","cart_items","find","handleMinus","handleRemove","className","children","length","map","onClick","src","image","thumbnail","alt","name","toLocaleString"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Haus-Restyle/haus-restyle-frontend/src/components/users/Cart.js"],"sourcesContent":["import React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Footer from \"../footer/Footer\";\n\nexport default function Cart({cart, setCart, isScrolled}) {\n    const navigate = useNavigate();\n    const token = localStorage.getItem(\"jwt\");\n    const total = cart.reduce((a, c) => {\n        return a + (c.furniture.price * c.quantities);\n    }, 0);\n\n    function handleAdd(id, quantities) {\n        if (quantities <= 9) {\n            fetch(`https://haus-db.onrender.com/cart_items/${id}`, {\n                method: 'PATCH',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: `Bearer ${token}`,\n                },\n                body: JSON.stringify({\n                    'quantities': quantities + 1,\n                })\n            })\n            .then(r => r.json())\n            .then(data => {\n                const updatedCart = [...cart];\n                const index = updatedCart.findIndex(item => item.id === id);\n                updatedCart[index] = data.user.cart_items.find(item => item.id === id);\n                setCart(updatedCart);\n            })\n        }\n    }\n\n    function handleMinus(id, quantities) {\n        if( quantities > 1) {\n            fetch(`https://haus-db.onrender.com/cart_items/${id}`, {\n                method: 'PATCH',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: `Bearer ${token}`,\n                },\n                body: JSON.stringify({\n                    'quantities': quantities - 1,\n                })\n            }).then(r => r.json())\n            .then(data => {\n                const updatedCart = [...cart];\n                const index = updatedCart.findIndex(item => item.id === id);\n                updatedCart[index] = data.user.cart_items.find(item => item.id === id);\n                setCart(updatedCart);\n            })\n        }\n    }\n\n    function handleRemove(id) {\n        fetch(`https://haus-db.onrender.com/cart_items/${id}`, {\n            method: 'DELETE',\n            headers: {\n                Authorization: `Bearer ${token}`,\n            }\n        }).then(r => r.json())\n        .then(data => {\n            setCart(data.user.cart_items);\n        })\n    }\n   \n    return (\n        <div className='cart-container flex-box'>\n            <div className={`empty-background grey-background ${isScrolled ? 'add-dropshadow' : ''}`}></div>    \n\n            {cart.length !== 0 ?\n            <div className='cart flex-box'>\n                <div className='cart-cards-container flex-box'>\n                    <h1>Order Summary</h1>\n                    {cart.map(item => {\n                        return (\n                            <div className='cart-card flex-box' key={item.id}>\n                                <div className='cart-img-container' onClick={() => navigate(`/furnitures/${item.furniture.id}`)}>\n                                    <img src={item.furniture.image.thumbnail} alt='image' className=\"fixed-img\" />\n                                </div>\n\n                                <div className=\"cart-card-info flex-box\">\n                                    <div className='cart-card-info-container'>\n                                        <h1 onClick={() => navigate(`/furnitures/${item.furniture.id}`)}>\n                                            {item.furniture.name}\n                                        </h1>\n                                        <p>USD {item.furniture.price.toLocaleString()}</p>\n                                    </div>\n\n                                    <div className='cart-card-operations-container flex-box'>\n                                        <div className='quantity-operation flex-box'>\n                                            <p>Quantity</p>\n\n                                            <div className='quantity-buttons flex-box'>\n                                                <i className='bx bx-plus' onClick={() => handleAdd(item.id, item.quantities)}></i>\n                                                <p>{item.quantities}</p>\n                                                <i className='bx bx-minus' onClick={() => handleMinus(item.id, item.quantities)}></i>\n                                            </div>\n                                        </div>\n\n                                    <div className='remove-button' onClick={() => handleRemove(item.id)}>\n                                        <p>Remove Furniture</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div> \n                    )})}   \n                </div>\n                    \n                <div className='cart-total-container for-small-screen'>\n                    <div className=\"flex-box\">\n                        <p>Delivery</p>\n                        <p>Excluding delivery</p>\n                    </div>\n\n                    <div className='flex-box'>\n                        <p>Total(Excel. tax)</p>\n                        <p>USD {total.toLocaleString()}</p>\n                    </div>\n\n                    <button className='button' onClick={() => navigate('/checkout')}> \n                        <p>Continue to checkout</p>\n                        <i className='bx bx-arrow-back' ></i>\n                    </button>\n                </div>\n            </div>\n            :\n            <p className=\"empty-cart-message\">Your cart is empty.</p> }\n\n            <div className='subpages-footer-container'>\n                <Footer />\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}